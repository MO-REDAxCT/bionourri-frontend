{"ast":null,"code":"import React,{useContext,useEffect}from'react';import Container from'react-bootstrap/esm/Container';import Row from'react-bootstrap/esm/Row';import Col from'react-bootstrap/esm/Col';import{useReducer}from'react';import{Store}from'../Store';import axios from'axios';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import Button from'react-bootstrap/esm/Button';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function reducer(state,action){switch(action.type){case'ORDERS_REQ':return{...state,loading:true};break;case'ORDERS_ERR':console.log(\"err inside reducer \",action.payload);return{...state,err:action.payload,loading:false};break;case'ORDERS_SUCC':console.log(\"order succ inside reducccer\");return{...state,err:false,loading:false,orders:action.payload};break;default:return state;}}export default function OrderHistoryScreen(){const[{err,loading,orders},dispatch]=useReducer(reducer,{err:false,loading:true});const{state}=useContext(Store);const{userinfo}=state;console.log('loding',loading);useEffect(()=>{dispatch({type:'ORDERS_REQ'});async function fetch_orders(){try{const result=await axios.get(\"/api/order/all\",{headers:{authorization:\"Bearer \".concat(userinfo.token)}});console.log(\"dispatch succ\");console.log(\"result \",result);dispatch({type:'ORDERS_SUCC',payload:result.data});}catch(err){console.log(\"err inside catch\",err.message);dispatch({type:'ORDERS_ERR',payload:err});}}fetch_orders();},[userinfo.token]);return loading?/*#__PURE__*/_jsx(LoadingBox,{}):err?/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",err:err},'primary')}):/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Order History\"}),/*#__PURE__*/_jsxs(Row,{className:\"mt-4 mb-1 pb-2  sm-fontSize\",id:\"border_order_h\",children:[/*#__PURE__*/_jsx(Col,{className:\"col-4\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"ID\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"DATE\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"TOTAL\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"DELIVRED\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"PAID\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"ACTIONS\"})})]}),orders.map(x=>{return/*#__PURE__*/_jsxs(Row,{className:\"mt-1  sm-fontSize\",style:{alignItems:'center'},id:\"border_order_h\",children:[/*#__PURE__*/_jsx(Col,{className:\"col-4\",children:x._id}),/*#__PURE__*/_jsx(Col,{children:new Date(x.createdAt).toLocaleDateString()}),/*#__PURE__*/_jsx(Col,{children:x.totalPrice}),/*#__PURE__*/_jsx(Col,{children:x.isDelivered?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(Col,{children:x.isPaid?'Yes':'No'}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/order/\".concat(x._id),\"mg-b\":\"1\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"m-2\",id:\"sm-btn-fontSize\",children:\"Details\"})})})]});})]});}","map":{"version":3,"names":["React","useContext","useEffect","Container","Row","Col","useReducer","Store","axios","LoadingBox","MessageBox","Button","Link","jsx","_jsx","jsxs","_jsxs","reducer","state","action","type","loading","console","log","payload","err","orders","OrderHistoryScreen","dispatch","userinfo","fetch_orders","result","get","headers","authorization","concat","token","data","message","children","variant","className","id","map","x","style","alignItems","_id","Date","createdAt","toLocaleDateString","totalPrice","isDelivered","isPaid","to"],"sources":["C:/Users/RED38/Desktop/amazona/frontend/src/Screens/orderHistoryScreen.js"],"sourcesContent":["import React, { useContext, useEffect } from 'react'\r\nimport Container from 'react-bootstrap/esm/Container'\r\nimport Row from 'react-bootstrap/esm/Row';\r\nimport Col from 'react-bootstrap/esm/Col';\r\nimport { useReducer} from 'react';\r\nimport { Store } from '../Store';\r\nimport axios from 'axios';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport Button from 'react-bootstrap/esm/Button';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction reducer(state , action)\r\n    {\r\n        switch(action.type)\r\n            {\r\n                case 'ORDERS_REQ' : \r\n                    return {...state , loading : true}    \r\n                    break;\r\n\r\n                case 'ORDERS_ERR' : \r\n                    console.log(\"err inside reducer \" , action.payload)\r\n                    return {...state , err : action.payload , loading : false}    \r\n                    break;\r\n\r\n                case 'ORDERS_SUCC'    :\r\n                    console.log(\"order succ inside reducccer\" )\r\n                    return {...state , err : false , loading : false , orders : action.payload}\r\n                    break;\r\n                default:\r\n                    return state    \r\n            }\r\n\r\n    }\r\nexport default function OrderHistoryScreen() {\r\n\r\n    const [{err , loading , orders} , dispatch] = useReducer(reducer , {err : false , loading : true})\r\n    const {state} = useContext(Store)\r\n    const {userinfo} = state\r\n    console.log('loding' , loading)\r\n    useEffect(()=>{\r\n        dispatch({type : 'ORDERS_REQ'})\r\n\r\n        async function fetch_orders()\r\n            {\r\n                try{\r\n                    const result = await axios.get(`/api/order/all`  , {\r\n                        headers : \r\n                            {\r\n                                authorization :  `Bearer ${userinfo.token}`\r\n                            }\r\n                    })          \r\n                    console.log(\"dispatch succ\")\r\n                    console.log(\"result \" , result)\r\n                    dispatch({type : 'ORDERS_SUCC' , payload : result.data})\r\n                }\r\n                catch(err){\r\n                        console.log(\"err inside catch\" , err.message)\r\n                        dispatch({type : 'ORDERS_ERR' , payload : err})\r\n                }\r\n            }\r\n\r\n            fetch_orders()\r\n    } , [userinfo.token])\r\n  return (\r\n    \r\n    loading ? \r\n       <LoadingBox></LoadingBox>\r\n\r\n    : err ? \r\n        <Container>\r\n        <MessageBox variant='danger'key='primary' err={err}></MessageBox>\r\n        </Container>\r\n    :      \r\n    \r\n        <Container>\r\n            <h1>Order History</h1>\r\n\r\n            <Row  className='mt-4 mb-1 pb-2  sm-fontSize'  id='border_order_h'>\r\n                <Col className='col-4'>\r\n                    <strong>ID</strong>\r\n                </Col>\r\n                <Col >\r\n                    <strong>DATE</strong>\r\n                </Col>\r\n                <Col>\r\n                    <strong>TOTAL</strong>\r\n                </Col>\r\n                <Col>\r\n                    <strong>DELIVRED</strong>\r\n                </Col>\r\n                <Col>\r\n                    <strong>PAID</strong>\r\n                </Col>\r\n                <Col>\r\n                    <strong>ACTIONS</strong>\r\n                </Col>\r\n            </Row>\r\n            {\r\n                orders.map((x)=>{\r\n                    \r\n                return <Row className='mt-1  sm-fontSize' style={{alignItems : 'center'}} id='border_order_h'>\r\n                <Col className='col-4'>\r\n                    {x._id}\r\n                </Col>\r\n                <Col >\r\n                    {new Date(x.createdAt).toLocaleDateString()}\r\n                </Col>\r\n                <Col>\r\n                    {x.totalPrice}\r\n                </Col>\r\n                <Col>\r\n                    \r\n                    {x.isDelivered ? \"Yes\" : \"No\"}\r\n                    \r\n                </Col>\r\n                <Col>\r\n                    {x.isPaid ? 'Yes' : 'No'}\r\n                </Col>\r\n                <Col>\r\n                <Link to={`/order/${x._id}`} mg-b='1'>\r\n               <Button variant=\"primary\" className='m-2' id='sm-btn-fontSize'>Details</Button>\r\n              </Link>    \r\n                </Col>\r\n            </Row>\r\n                })\r\n            }\r\n            \r\n        </Container>\r\n        \r\n)\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CACpD,MAAO,CAAAC,SAAS,KAAM,+BAA+B,CACrD,MAAO,CAAAC,GAAG,KAAM,yBAAyB,CACzC,MAAO,CAAAC,GAAG,KAAM,yBAAyB,CACzC,OAASC,UAAU,KAAO,OAAO,CACjC,OAASC,KAAK,KAAQ,UAAU,CAChC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,MAAM,KAAM,4BAA4B,CAC/C,OAASC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,QAAS,CAAAC,OAAOA,CAACC,KAAK,CAAGC,MAAM,CAC3B,CACI,OAAOA,MAAM,CAACC,IAAI,EAEV,IAAK,YAAY,CACb,MAAO,CAAC,GAAGF,KAAK,CAAGG,OAAO,CAAG,IAAI,CAAC,CAClC,MAEJ,IAAK,YAAY,CACbC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAGJ,MAAM,CAACK,OAAO,CAAC,CACnD,MAAO,CAAC,GAAGN,KAAK,CAAGO,GAAG,CAAGN,MAAM,CAACK,OAAO,CAAGH,OAAO,CAAG,KAAK,CAAC,CAC1D,MAEJ,IAAK,aAAa,CACdC,OAAO,CAACC,GAAG,CAAC,6BAA8B,CAAC,CAC3C,MAAO,CAAC,GAAGL,KAAK,CAAGO,GAAG,CAAG,KAAK,CAAGJ,OAAO,CAAG,KAAK,CAAGK,MAAM,CAAGP,MAAM,CAACK,OAAO,CAAC,CAC3E,MACJ,QACI,MAAO,CAAAN,KAAK,CACpB,CAER,CACJ,cAAe,SAAS,CAAAS,kBAAkBA,CAAA,CAAG,CAEzC,KAAM,CAAC,CAACF,GAAG,CAAGJ,OAAO,CAAGK,MAAM,CAAC,CAAGE,QAAQ,CAAC,CAAGtB,UAAU,CAACW,OAAO,CAAG,CAACQ,GAAG,CAAG,KAAK,CAAGJ,OAAO,CAAG,IAAI,CAAC,CAAC,CAClG,KAAM,CAACH,KAAK,CAAC,CAAGjB,UAAU,CAACM,KAAK,CAAC,CACjC,KAAM,CAACsB,QAAQ,CAAC,CAAGX,KAAK,CACxBI,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAGF,OAAO,CAAC,CAC/BnB,SAAS,CAAC,IAAI,CACV0B,QAAQ,CAAC,CAACR,IAAI,CAAG,YAAY,CAAC,CAAC,CAE/B,cAAe,CAAAU,YAAYA,CAAA,CACvB,CACI,GAAG,CACC,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAvB,KAAK,CAACwB,GAAG,kBAAqB,CAC/CC,OAAO,CACH,CACIC,aAAa,WAAAC,MAAA,CAAcN,QAAQ,CAACO,KAAK,CAC7C,CACR,CAAC,CAAC,CACFd,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAC5BD,OAAO,CAACC,GAAG,CAAC,SAAS,CAAGQ,MAAM,CAAC,CAC/BH,QAAQ,CAAC,CAACR,IAAI,CAAG,aAAa,CAAGI,OAAO,CAAGO,MAAM,CAACM,IAAI,CAAC,CAAC,CAC5D,CACA,MAAMZ,GAAG,CAAC,CACFH,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAGE,GAAG,CAACa,OAAO,CAAC,CAC7CV,QAAQ,CAAC,CAACR,IAAI,CAAG,YAAY,CAAGI,OAAO,CAAGC,GAAG,CAAC,CAAC,CACvD,CACJ,CAEAK,YAAY,CAAC,CAAC,CACtB,CAAC,CAAG,CAACD,QAAQ,CAACO,KAAK,CAAC,CAAC,CACvB,MAEE,CAAAf,OAAO,cACJP,IAAA,CAACL,UAAU,GAAa,CAAC,CAE1BgB,GAAG,cACDX,IAAA,CAACX,SAAS,EAAAoC,QAAA,cACVzB,IAAA,CAACJ,UAAU,EAAC8B,OAAO,CAAC,QAAQ,CAAcf,GAAG,CAAEA,GAAI,EAAnB,SAAgC,CAAC,CACtD,CAAC,cAGZT,KAAA,CAACb,SAAS,EAAAoC,QAAA,eACNzB,IAAA,OAAAyB,QAAA,CAAI,eAAa,CAAI,CAAC,cAEtBvB,KAAA,CAACZ,GAAG,EAAEqC,SAAS,CAAC,6BAA6B,CAAEC,EAAE,CAAC,gBAAgB,CAAAH,QAAA,eAC9DzB,IAAA,CAACT,GAAG,EAACoC,SAAS,CAAC,OAAO,CAAAF,QAAA,cAClBzB,IAAA,WAAAyB,QAAA,CAAQ,IAAE,CAAQ,CAAC,CAClB,CAAC,cACNzB,IAAA,CAACT,GAAG,EAAAkC,QAAA,cACAzB,IAAA,WAAAyB,QAAA,CAAQ,MAAI,CAAQ,CAAC,CACpB,CAAC,cACNzB,IAAA,CAACT,GAAG,EAAAkC,QAAA,cACAzB,IAAA,WAAAyB,QAAA,CAAQ,OAAK,CAAQ,CAAC,CACrB,CAAC,cACNzB,IAAA,CAACT,GAAG,EAAAkC,QAAA,cACAzB,IAAA,WAAAyB,QAAA,CAAQ,UAAQ,CAAQ,CAAC,CACxB,CAAC,cACNzB,IAAA,CAACT,GAAG,EAAAkC,QAAA,cACAzB,IAAA,WAAAyB,QAAA,CAAQ,MAAI,CAAQ,CAAC,CACpB,CAAC,cACNzB,IAAA,CAACT,GAAG,EAAAkC,QAAA,cACAzB,IAAA,WAAAyB,QAAA,CAAQ,SAAO,CAAQ,CAAC,CACvB,CAAC,EACL,CAAC,CAEFb,MAAM,CAACiB,GAAG,CAAEC,CAAC,EAAG,CAEhB,mBAAO5B,KAAA,CAACZ,GAAG,EAACqC,SAAS,CAAC,mBAAmB,CAACI,KAAK,CAAE,CAACC,UAAU,CAAG,QAAQ,CAAE,CAACJ,EAAE,CAAC,gBAAgB,CAAAH,QAAA,eAC7FzB,IAAA,CAACT,GAAG,EAACoC,SAAS,CAAC,OAAO,CAAAF,QAAA,CACjBK,CAAC,CAACG,GAAG,CACL,CAAC,cACNjC,IAAA,CAACT,GAAG,EAAAkC,QAAA,CACC,GAAI,CAAAS,IAAI,CAACJ,CAAC,CAACK,SAAS,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAC1C,CAAC,cACNpC,IAAA,CAACT,GAAG,EAAAkC,QAAA,CACCK,CAAC,CAACO,UAAU,CACZ,CAAC,cACNrC,IAAA,CAACT,GAAG,EAAAkC,QAAA,CAECK,CAAC,CAACQ,WAAW,CAAG,KAAK,CAAG,IAAI,CAE5B,CAAC,cACNtC,IAAA,CAACT,GAAG,EAAAkC,QAAA,CACCK,CAAC,CAACS,MAAM,CAAG,KAAK,CAAG,IAAI,CACvB,CAAC,cACNvC,IAAA,CAACT,GAAG,EAAAkC,QAAA,cACJzB,IAAA,CAACF,IAAI,EAAC0C,EAAE,WAAAnB,MAAA,CAAYS,CAAC,CAACG,GAAG,CAAG,CAAC,OAAK,GAAG,CAAAR,QAAA,cACtCzB,IAAA,CAACH,MAAM,EAAC6B,OAAO,CAAC,SAAS,CAACC,SAAS,CAAC,KAAK,CAACC,EAAE,CAAC,iBAAiB,CAAAH,QAAA,CAAC,SAAO,CAAQ,CAAC,CAC1E,CAAC,CACA,CAAC,EACL,CAAC,CACF,CAAC,CAAC,EAGC,CAAC,CAGpB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}