{"ast":null,"code":"import React,{createContext,useReducer}from'react';import{json}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";function reducer(state,action){let cartitems=state.cart.cartitems;let i=0;switch(action.type){case'add_to_cart':{const exist_item=state.cart.cartitems.find(x=>x._id===action.payload._id);if(exist_item){cartitems=cartitems.map(x=>{if(x._id===exist_item._id){return action.payload;}else{return x;}});localStorage.setItem('cart',JSON.stringify({...state.cart,cartitems}));return{...state,cart:{...state.cart,cartitems}};}else{localStorage.setItem('cart',JSON.stringify('cart',{...state.cart,cartitems:[...state.cart.cartitems,action.payload]}));return{...state,cart:{...state.cart,cartitems:[...state.cart.cartitems,action.payload]}};}}case'dlt_from_cart':{const item=state.cart.cartitems.find(x=>{if(action.payload._id===x._id){return true;}else{i++;}});console.log(i);state.cart.cartitems.splice(i,1);console.log(state.cart.cartitems);const cartitems=state.cart.cartitems;localStorage.setItem('cart',{...state.cart,cartitems});return{...state,cart:{...state.cart,cartitems}};break;}case'USER_SIGNIN':{localStorage.setItem('userinfo',JSON.stringify(action.payload));return{...state,userinfo:action.payload};}case'USER_SIGNOUT':localStorage.removeItem('userinfo');localStorage.removeItem('cart');return{...state,userinfo:'',cart:{cartitems:[],shipping:{},paymentMethod:''}};case'SET_SHIPPING_INFO':console.log(JSON.stringify({...state.cart,shipping:{...action.payload}}));localStorage.setItem('cart',JSON.stringify({...state.cart,shipping:{...action.payload}}));console.log(JSON.parse(localStorage.getItem('cart')));console.log('l hilola');return{...state,cart:{...state.cart,shipping:{...action.payload}}};case'SAVE_PAYMENT_METHOD':localStorage.setItem('cart',JSON.stringify({...state.cart,paymentMethod:action.payload}));return{...state,cart:{...state.cart,paymentMethod:action.payload}};case'CART_CLEAR':localStorage.setItem('cart',JSON.stringify({...JSON.parse(localStorage.getItem('cart')),cartitems:[]}));return{...state,cart:{...state.cart,cartitems:[]}};case'PLACE_ORDER':localStorage.setItem('cart',JSON.stringify({...state.cart,order:action.payload}));return{...state,cart:{...state.cart,order:action.payload}};default:return state;}}export const Store=/*#__PURE__*/createContext({});const initialState={userinfo:localStorage.getItem('userinfo')?JSON.parse(localStorage.getItem('userinfo')):'',cart:localStorage.getItem('cart')?JSON.parse(localStorage.getItem('cart')):{cartitems:[],shipping:{},paymentMethod:''}};export function StoreProvider(_ref){let{children}=_ref;const[state,dispatch]=useReducer(reducer,initialState);const value={state,dispatch};return/*#__PURE__*/_jsx(Store.Provider,{value:value,children:children});}","map":{"version":3,"names":["React","createContext","useReducer","json","jsx","_jsx","reducer","state","action","cartitems","cart","i","type","exist_item","find","x","_id","payload","map","localStorage","setItem","JSON","stringify","item","console","log","splice","userinfo","removeItem","shipping","paymentMethod","parse","getItem","order","Store","initialState","StoreProvider","_ref","children","dispatch","value","Provider"],"sources":["C:/Users/RED38/Desktop/amazona/frontend/src/Store.js"],"sourcesContent":["import React, {createContext, useReducer } from 'react'\r\nimport { json } from 'react-router-dom';\r\n\r\nfunction reducer(state , action)\r\n{\r\n  let cartitems = state.cart.cartitems\r\n  let i = 0 ;\r\n    switch(action.type)\r\n     {\r\n        case 'add_to_cart':\r\n          {\r\n          const exist_item = state.cart.cartitems.find((x)=>(x._id === action.payload._id))\r\n          \r\n          if(exist_item )\r\n          {\r\n           cartitems = cartitems.map((x)=>{if(x._id === exist_item._id) {return action.payload } else{ return x}})\r\n            localStorage.setItem('cart' , JSON.stringify({...state.cart , cartitems}))\r\n           return {...state , cart : {...state.cart , cartitems}}\r\n          }\r\n          \r\n          else\r\n          {\r\n            localStorage.setItem('cart' , JSON.stringify('cart' , {...state.cart , cartitems : [...state.cart.cartitems , action.payload]}))\r\n            return {...state , cart : {...state.cart , cartitems : [...state.cart.cartitems , action.payload]}}\r\n           \r\n          }\r\n          \r\n        }\r\n\r\n     case 'dlt_from_cart':\r\n        {\r\n           const item =  state.cart.cartitems.find((x)=>{\r\n                  if(action.payload._id === x._id) \r\n                  {\r\n                    return true ;\r\n                  }\r\n                  else\r\n                  {\r\n                    \r\n                    i++;\r\n                  }\r\n          })\r\n          console.log(i)\r\n\r\n          state.cart.cartitems.splice(i , 1)\r\n          console.log(state.cart.cartitems)\r\n          const cartitems = state.cart.cartitems\r\n          localStorage.setItem('cart' , {...state.cart , cartitems})\r\n          return {...state , cart : {...state.cart , cartitems}}\r\n          break\r\n        }\r\n     case 'USER_SIGNIN' : \r\n      {\r\n        localStorage.setItem('userinfo' , JSON.stringify(action.payload))    \r\n        return {...state , userinfo : action.payload}\r\n       \r\n      }  \r\n      case 'USER_SIGNOUT' : \r\n      localStorage.removeItem('userinfo')  \r\n      localStorage.removeItem('cart')  \r\n      return {...state , userinfo : '' , cart:{cartitems:[] , shipping : {} , paymentMethod:''}}\r\n\r\n      case 'SET_SHIPPING_INFO' :\r\n      console.log(JSON.stringify({...state.cart , shipping:{...action.payload}}))  \r\n      localStorage.setItem('cart' , JSON.stringify({...state.cart , shipping:{...action.payload}}))\r\n      console.log(JSON.parse(localStorage.getItem('cart')))\r\n      console.log('l hilola')  \r\n      return {...state , cart : {...state.cart , shipping:{...action.payload}}}\r\n\r\n      \r\n      case 'SAVE_PAYMENT_METHOD' :\r\n        localStorage.setItem('cart' , JSON.stringify({...state.cart , paymentMethod:action.payload}))\r\n        return {...state , cart : {...state.cart , paymentMethod:action.payload}}\r\n\r\n      case 'CART_CLEAR' : \r\n      localStorage.setItem('cart' , JSON.stringify({...JSON.parse(localStorage.getItem('cart')) , cartitems:[]}))\r\n       return {...state , cart : {...state.cart , cartitems:[]}}\r\n\r\n      case 'PLACE_ORDER' :\r\n        localStorage.setItem('cart' ,JSON.stringify({...state.cart , order:action.payload}))\r\n        return {...state , cart : {...state.cart , order:action.payload}}\r\n     default : return state\r\n}\r\n}\r\n\r\nexport const Store = createContext({})\r\n\r\nconst initialState = {\r\n    userinfo : localStorage.getItem('userinfo') ? \r\n     JSON.parse(localStorage.getItem('userinfo'))\r\n     :'' , \r\n    cart : localStorage.getItem('cart') ? \r\n             JSON.parse(localStorage.getItem('cart'))\r\n             :{cartitems:[] , shipping : {} , paymentMethod:''}\r\n}\r\nexport  function StoreProvider({children}) {\r\n\r\n    const [state , dispatch] = useReducer(reducer , initialState)\r\n    const value = {state , dispatch}\r\n  return (\r\n    \r\n    <Store.Provider value={value}>{children}</Store.Provider>\r\n  )\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}