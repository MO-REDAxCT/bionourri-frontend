{"ast":null,"code":"import React,{useContext,useReducer}from'react';import{Store}from'../Store';import Container from'react-bootstrap/esm/Container';import Button from'react-bootstrap/Button';import Form from'react-bootstrap/Form';import{useState}from'react';import axios from'axios';import Toast from'react-bootstrap/Toast';import LoadingBox from'../components/LoadingBox';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserProfileScreen(){const{state,dispatch}=useContext(Store);const{userinfo}=state;const[{loading,err},setState]=useState({loading:false,err:false});const[name,setName]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');console.log(\"the error is \",err);console.log(\"the loading is \",loading);function change_UserInfo(){console.log(state.userinfo.token);setState({loading:true,err:false});async function put_info(){console.log(\"confirm pass\",confirmPassword);console.log(\"pass\",password);if(confirmPassword!==password){console.log(\"doesn't match\");setState({loading:false,err:{message:\"confirm password incorrect\"}});}else{try{await axios.put('/api/users/update',{name:name,email:email,password:password},{headers:{authorization:\"Bearer \".concat(state.userinfo.token)}});dispatch({type:'USER_SIGNOUT'});const sign_result=await axios.post('/api/users/signin',{email:email,password:password});dispatch({type:'USER_SIGNIN',payload:sign_result.data});}catch(err){console.log(\"err message \",err.message);setState({loading:false,err:err});}}}put_info();}return/*#__PURE__*/_jsxs(Container,{style:{textAlign:'left',maxWidth:'45rem'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Profile\"}),/*#__PURE__*/_jsxs(Form,{className:\"mt-4\",onSubmit:e=>{e.preventDefault();change_UserInfo();},children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"enter new name\",onChange:e=>{setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Adress\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"enter new email\",onChange:e=>{setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"enter new password\",onChange:e=>{setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"confirm new password\",onChange:e=>{setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"mb-2 wb\",children:\"Update\"})]}),/*#__PURE__*/_jsx(Toast,{style:{maxWidth:'40%',position:\"absolute\",top:'15%',left:'60%',textAlign:'center',fontSize:'16px',fontWeight:'400',backgroundColor:'transparent',border:'0',boxShadow:'none'},onClose:()=>{setState({err:false,loading:false});},show:loading,delay:1000,autohide:true,children:/*#__PURE__*/_jsx(Toast.Body,{children:/*#__PURE__*/_jsx(LoadingBox,{})})}),/*#__PURE__*/_jsx(Toast,{style:{maxWidth:'40%',position:\"absolute\",top:'15%',left:'60%',zIndex:9999,textAlign:'center',fontSize:'16px',fontWeight:'400'},bg:\"warning\",onClose:()=>{setState({loading:false,err:false});},show:err,delay:1000,autohide:true,children:/*#__PURE__*/_jsx(Toast.Body,{children:err.message})})]});}","map":{"version":3,"names":["React","useContext","useReducer","Store","Container","Button","Form","useState","axios","Toast","LoadingBox","jsx","_jsx","jsxs","_jsxs","UserProfileScreen","state","dispatch","userinfo","loading","err","setState","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","console","log","change_UserInfo","token","put_info","message","put","headers","authorization","concat","type","sign_result","post","payload","data","style","textAlign","maxWidth","children","className","onSubmit","e","preventDefault","Group","Label","Control","placeholder","onChange","target","value","position","top","left","fontSize","fontWeight","backgroundColor","border","boxShadow","onClose","show","delay","autohide","Body","zIndex","bg"],"sources":["C:/Users/RED38/Desktop/amazona/frontend/src/Screens/UserProfileScreen.js"],"sourcesContent":["import React, { useContext, useReducer } from 'react'\r\nimport { Store } from '../Store'\r\nimport Container from 'react-bootstrap/esm/Container'\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useState } from 'react';\r\nimport axios from 'axios';\r\nimport Toast from 'react-bootstrap/Toast';  \r\nimport LoadingBox from '../components/LoadingBox';\r\n\r\n\r\nexport default function UserProfileScreen() {\r\n   \r\n    const {state , dispatch} = useContext(Store)\r\n    const {userinfo} = state\r\n    const [{loading , err} , setState] = useState({loading : false , err : false})\r\n    const [name , setName] = useState('')\r\n    const [email , setEmail] = useState('')\r\n    const [password , setPassword] = useState('')\r\n    const [confirmPassword , setConfirmPassword] = useState('')\r\n\r\n    console.log(\"the error is \" , err)\r\n    console.log(\"the loading is \" , loading)\r\n    function change_UserInfo()\r\n    {\r\n        console.log(state.userinfo.token)\r\n        setState({loading : true , err : false})  \r\n        \r\n        async function put_info()\r\n            {\r\n                console.log(\"confirm pass\" , confirmPassword)\r\n                console.log(\"pass\" , password)\r\n                if(confirmPassword !== password)\r\n                    {\r\n                        console.log(\"doesn't match\")\r\n                        setState({loading:false , err : {message:\"confirm password incorrect\"}})\r\n                    }\r\n                else\r\n                    {    \r\n                try{\r\n                    await axios.put('/api/users/update' , {name : name , email : email , password : password} , {\r\n                        headers:{\r\n                            authorization : `Bearer ${state.userinfo.token}` , \r\n                        }\r\n                    } )\r\n\r\n                    dispatch({type:'USER_SIGNOUT'})\r\n\r\n                    const sign_result =  await axios.post('/api/users/signin' , {email : email , password : password})\r\n                    dispatch({type:'USER_SIGNIN' , payload:sign_result.data}) \r\n                }\r\n            \r\n            catch(err)\r\n                {\r\n                    console.log(\"err message \" , err.message )\r\n\r\n                    setState({loading : false , err : err})\r\n                }\r\n    }\r\n    \r\n    }\r\n    put_info()\r\n}\r\n  return (\r\n     \r\n        \r\n        <Container style={{textAlign:'left' , maxWidth:'45rem'}}>\r\n            <h1>User Profile</h1>   \r\n            <Form className='mt-4' onSubmit={(e)=>{\r\n                e.preventDefault()\r\n                change_UserInfo()}}>\r\n                <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Name</Form.Label>\r\n                    <Form.Control type='text' placeholder='enter new name' onChange={(e)=>{\r\n                        setName(e.target.value)\r\n                    }}/>\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Email Adress</Form.Label>\r\n                    <Form.Control type='email' placeholder='enter new email' onChange={(e)=>{\r\n                        setEmail(e.target.value)\r\n                    }}/>\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Password</Form.Label>\r\n                    <Form.Control type='password' placeholder='enter new password' onChange={(e)=>{setPassword(e.target.value)}}/>\r\n                </Form.Group>\r\n\r\n                <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Confirm Password</Form.Label>\r\n                    <Form.Control type='password' placeholder='confirm new password' onChange={(e)=>{setConfirmPassword(e.target.value)}}/>\r\n                </Form.Group>   \r\n                <Button type='submit' className='mb-2 wb'>Update</Button>\r\n            </Form>\r\n                    \r\n            <Toast  style={{maxWidth:'40%' ,  position: \"absolute\", top:'15%' , left:'60%'  ,textAlign:'center' , fontSize:'16px' , fontWeight:'400', backgroundColor:'transparent' , border:'0' , boxShadow:'none'}}  onClose={()=>{setState({err: false ,  loading : false})}}  show={loading} delay={1000} autohide>\r\n               <Toast.Body>\r\n               <LoadingBox ></LoadingBox>\r\n               </Toast.Body>\r\n               </Toast>\r\n                \r\n               <Toast  style={{maxWidth:'40%' ,  position: \"absolute\", top:'15%' , left:'60%' ,zIndex: 9999 ,textAlign:'center' , fontSize:'16px' , fontWeight:'400'}} bg='warning' onClose={()=>{setState({loading:false  ,err : false})}}  show={err} delay={1000} autohide>\r\n               <Toast.Body>\r\n                  {err.message}\r\n               </Toast.Body>\r\n            </Toast> \r\n\r\n        </Container>\r\n     \r\n    \r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}