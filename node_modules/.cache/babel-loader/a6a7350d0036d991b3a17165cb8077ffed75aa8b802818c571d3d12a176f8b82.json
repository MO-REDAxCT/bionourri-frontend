{"ast":null,"code":"import React,{useEffect}from'react';import Container from'react-bootstrap/esm/Container';import Form from'react-bootstrap/Form';import{Link,useNavigate,useLocation}from'react-router-dom';import Button from'react-bootstrap/esm/Button';import{useState}from'react';import axios from'axios';import{Store}from'../Store';import{useContext}from'react';import Toast from'react-bootstrap/Toast';import LoadingBox from'../components/LoadingBox';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SigninScreen(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[t_state,setT_state]=useState({err:'',loading:''});const{err,loading}=t_state;const Navigate=useNavigate();const{search}=useLocation();const redirectUrl=new URLSearchParams(search).get('redirect');const redirect=redirectUrl?redirectUrl:'/';const{state,dispatch}=useContext(Store);const u_name=state.userinfo?state.userinfo.name:'';async function handleSubmit(e){e.preventDefault();let result;try{result=await axios.post('/api/users/signin',{email:email,password:password});console.log(500);}catch(error){result=error.response;console.log(\"backend\");}console.log(typeof result.data);console.log(result);if(result.data.message===\"Internal server error\"){console.log(\"hola machi jay\");setT_state({err:result.data.message,loading:false});}else{dispatch({type:'USER_SIGNIN',payload:result.data});Navigate(\"\".concat(redirect));}}useEffect(()=>{if(u_name)Navigate(\"\".concat(redirect));});return/*#__PURE__*/_jsxs(Container,{className:\"margin \",style:{textAlign:'left',maxWidth:'45rem'},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3\",children:\"Sign in\"}),/*#__PURE__*/_jsxs(Form,{style:{textAlign:'left',maxWidth:'45rem'},onSubmit:e=>{handleSubmit(e);},children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"margin\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{style:{padding:'12px 20px'},type:\"email\",placeholder:\"Enter email\",onChange:e=>{setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"margin\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{style:{padding:'12px 20px'},type:\"password\",placeholder:\"Enter password\",onChange:e=>{setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"mb-2 wb\",onClick:()=>{setT_state({err:'',loading:true});},children:\"signin\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsxs(Form.Text,{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"ft_1\",children:\"New customer ? \"}),/*#__PURE__*/_jsx(Link,{to:\"/signup?redirect=\".concat(redirect),children:\"Create your account\"})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form.Text,{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"ft_1\",children:\"Forget password ? \"}),/*#__PURE__*/_jsx(Link,{to:\"/signup?redirect=\".concat(redirect),children:\"Reset password\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Toast,{style:{maxWidth:'40%',position:\"absolute\",top:'15%',left:'60%',textAlign:'center',fontSize:'16px',fontWeight:'400',backgroundColor:'transparent',border:'0',boxShadow:'none'},onClose:()=>{setT_state({...t_state,loading:false});},show:loading,delay:10000,autohide:true,children:/*#__PURE__*/_jsx(Toast.Body,{children:/*#__PURE__*/_jsx(LoadingBox,{})})}),/*#__PURE__*/_jsx(Toast,{style:{maxWidth:'40%',position:\"absolute\",top:'15%',left:'60%',zIndex:9999,textAlign:'center',fontSize:'16px',fontWeight:'400'},bg:\"warning\",onClose:()=>{setT_state({...t_state,err:false});},show:err,delay:1000,autohide:true,children:/*#__PURE__*/_jsx(Toast.Body,{children:err})})]})]});}","map":{"version":3,"names":["React","useEffect","Container","Form","Link","useNavigate","useLocation","Button","useState","axios","Store","useContext","Toast","LoadingBox","jsx","_jsx","jsxs","_jsxs","SigninScreen","email","setEmail","password","setPassword","t_state","setT_state","err","loading","Navigate","search","redirectUrl","URLSearchParams","get","redirect","state","dispatch","u_name","userinfo","name","handleSubmit","e","preventDefault","result","post","console","log","error","response","data","message","type","payload","concat","className","style","textAlign","maxWidth","children","onSubmit","Group","Label","Control","padding","placeholder","onChange","target","value","onClick","Text","to","position","top","left","fontSize","fontWeight","backgroundColor","border","boxShadow","onClose","show","delay","autohide","Body","zIndex","bg"],"sources":["C:/Users/RED38/Desktop/amazona/frontend/src/Screens/SigninScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport Container from 'react-bootstrap/esm/Container'\r\nimport Form from 'react-bootstrap/Form';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport Button from 'react-bootstrap/esm/Button';\r\nimport  {useState}  from 'react';\r\nimport axios from 'axios'\r\nimport { Store } from '../Store';\r\nimport { useContext } from 'react';\r\nimport Toast from 'react-bootstrap/Toast';\r\nimport LoadingBox from '../components/LoadingBox';\r\n\r\nexport default function SigninScreen() {\r\n\r\n  const [email , setEmail] = useState('')\r\n  const [password , setPassword] = useState('')\r\n  const [t_state , setT_state] = useState({err : '' , loading : ''})\r\n  const {err , loading} = t_state\r\n  const Navigate = useNavigate()\r\n  const {search} = useLocation()\r\n  const redirectUrl = new URLSearchParams(search).get('redirect')\r\n  const redirect = redirectUrl ? redirectUrl : '/'\r\n  const {state , dispatch} = useContext(Store)\r\n  const u_name = state.userinfo ? state.userinfo.name : ''\r\n  \r\n  async function handleSubmit(e)\r\n    {\r\n      \r\n      e.preventDefault()\r\n      let result\r\n      \r\n    \r\n      try\r\n      {\r\n        result =  await axios.post('/api/users/signin' , {email : email , password : password})\r\n        console.log(500)\r\n      }\r\n      catch(error)\r\n      {\r\n        result = error.response\r\n        console.log(\"backend\")\r\n      }\r\n        \r\n      console.log(typeof(result.data))\r\n      console.log(result)\r\n      if(result.data.message === \"Internal server error\")\r\n        {\r\n          console.log(\"hola machi jay\")\r\n          \r\n          setT_state({err:result.data.message , loading:false})\r\n          \r\n           \r\n        }\r\n      else\r\n        {\r\n          dispatch({type:'USER_SIGNIN' , payload:result.data})  \r\n               \r\n          Navigate(`${redirect}`)\r\n          \r\n        }\r\n        \r\n    }\r\n   useEffect(()=>{if(u_name)\r\n                    Navigate(`${redirect}` )})\r\n  return (\r\n   \r\n    \r\n    <Container className='margin ' style={{textAlign:'left', maxWidth:'45rem'}}>\r\n        <h1 className='mb-3'>Sign in</h1>\r\n         <Form  style={{textAlign:'left', maxWidth:'45rem'}} onSubmit={(e)=>{handleSubmit(e)}\r\n                                                                            }>\r\n            <Form.Group className='margin'>\r\n                <Form.Label>Email</Form.Label>\r\n                <Form.Control style={{padding: '12px 20px' }} type='email' placeholder='Enter email' onChange={(e)=>{setEmail(e.target.value)}}/>\r\n            </Form.Group>\r\n\r\n            <Form.Group className='margin'>\r\n                <Form.Label>Password</Form.Label>\r\n                <Form.Control style={{padding: '12px 20px'}}type='password' placeholder='Enter password' onChange={(e)=>{setPassword(e.target.value)}}/>\r\n            </Form.Group>\r\n            <Button type='submit' className='mb-2 wb' onClick={()=>{ setT_state({err:'' , loading:true})}}>signin</Button>\r\n            <div className='mb-2'><Form.Text><strong className='ft_1'>New customer ? </strong><Link to={`/signup?redirect=${redirect}`}>Create your account</Link></Form.Text></div>\r\n            <div><Form.Text ><strong className='ft_1'>Forget password ? </strong><Link to={`/signup?redirect=${redirect}`}>Reset password</Link></Form.Text></div>\r\n         </Form>\r\n         <div>\r\n         <Toast  style={{maxWidth:'40%' ,  position: \"absolute\", top:'15%' , left:'60%'  ,textAlign:'center' , fontSize:'16px' , fontWeight:'400', backgroundColor:'transparent' , border:'0' , boxShadow:'none'}}  onClose={()=>{setT_state({...t_state , loading : false})}}  show={loading} delay={10000} autohide>\r\n               <Toast.Body>\r\n               <LoadingBox ></LoadingBox>\r\n               </Toast.Body>\r\n               </Toast>\r\n          <Toast  style={{maxWidth:'40%' ,  position: \"absolute\", top:'15%' , left:'60%' ,zIndex: 9999 ,textAlign:'center' , fontSize:'16px' , fontWeight:'400'}} bg='warning' onClose={()=>{setT_state({...t_state  ,err : false})}}  show={err} delay={1000} autohide>\r\n               <Toast.Body>\r\n                  {err}\r\n               </Toast.Body>\r\n            </Toast>\r\n    \r\n         </div>\r\n    </Container>\r\n    \r\n      \r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}